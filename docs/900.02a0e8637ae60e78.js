"use strict";(self.webpackChunkEcommerce=self.webpackChunkEcommerce||[]).push([[900],{4900:(v,l,r)=>{r.r(l),r.d(l,{WhislistComponent:()=>g});var _=r(6814),t=r(4769),m=r(9196),u=r(6286),c=r(2425);function C(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8),t._UZ(2,"img",9),t.qZA(),t.TgZ(3,"div",10)(4,"div")(5,"h3",11),t._uU(6),t.qZA(),t.TgZ(7,"h4",11),t._uU(8),t.qZA(),t.TgZ(9,"p",12),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"button",13,14),t.NdJ("click",function(){const h=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.removeProductFromWishlist(h._id))}),t._UZ(14,"i",15),t._uU(15," Remove "),t.qZA()(),t.TgZ(16,"div")(17,"button",16,17),t.NdJ("click",function(){const h=t.CHM(e).$implicit,p=t.MAs(18),b=t.oxw(2);return t.KtG(b.addProduct(h._id,p))}),t._uU(19,"Add To Cart"),t.qZA()()()()}if(2&o){const e=d.$implicit;t.xp6(2),t.Q6J("src",e.imageCover,t.LSH),t.xp6(4),t.Oqu(e.title),t.xp6(2),t.hij("Brand : ",e.brand.name,""),t.xp6(2),t.hij("Price:",t.xi3(11,4,e.price,"EGP "),"")}}function n(o,d){if(1&o&&(t.TgZ(0,"section",2)(1,"div",3)(2,"h1",4),t._uU(3,"Wish List"),t.qZA()(),t.TgZ(4,"h6"),t._uU(5," Total Count : "),t.TgZ(6,"span",5),t._uU(7),t.qZA()(),t.YNc(8,C,20,7,"div",6),t.qZA()),2&o){const e=t.oxw();t.xp6(7),t.Oqu(e.wishlistItems.count),t.xp6(1),t.Q6J("ngForOf",e.wishlistItems.data)}}function a(o,d){1&o&&(t.TgZ(0,"div",18)(1,"h2",19),t._uU(2,"Your WhisList Is Empty....."),t.qZA()())}let g=(()=>{class o{constructor(e,i,s,h){this._WishlistService=e,this._Renderer2=i,this._CartService=s,this.toastr=h,this.empty=!0}ngOnInit(){this._WishlistService.getWhishList().subscribe({next:e=>{0!==e.count?(this.wishlistItems=e,this.empty=!1,this._WishlistService.count.next(e.count)):(this.empty=!0,this._WishlistService.count.next(0))},error:e=>{this.empty=!0}})}addProduct(e,i){this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.addToCart(e).subscribe({next:s=>{this.toastr.success(s.message),this._Renderer2.removeAttribute(i,"disabled"),this._CartService.cartNumber.next(s.numOfCartItems)},error:s=>{this._Renderer2.removeAttribute(i,"disabled")}})}removeProductFromWishlist(e){this._WishlistService.removeProductFromWishlist(e).subscribe({next:i=>{this.toastr.success(i.message),this._WishlistService.getWhishList().subscribe({next:s=>{0!==s.count?(this.wishlistItems=s,this.empty=!1,this._WishlistService.count.next(s.count)):this.empty=!0},error:s=>{this.empty=!0}})}})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.M),t.Y36(t.Qsj),t.Y36(u.N),t.Y36(c._W))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-whislist"]],standalone:!0,features:[t.jDz],decls:2,vars:2,consts:[["class","w-100 mx-auto rounded shadow bg-main-light p-3 mb-5",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"w-100","mx-auto","rounded","shadow","bg-main-light","p-3","mb-5"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h2"],[1,"text-main"],["class","row border-bottom py-2",4,"ngFor","ngForOf"],[1,"row","border-bottom","py-2"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"h6"],[1,"text-main","small","mb-0"],[1,"btn","m-0","p-0","text-main",3,"click"],["removebtn",""],[1,"fas","fa-trash-can"],[1,"btn","main-btn",3,"click"],["btnAdd",""],[1,"mt-4"],[1,"text-center"]],template:function(i,s){1&i&&(t.YNc(0,n,9,2,"section",0),t.YNc(1,a,3,0,"div",1)),2&i&&(t.Q6J("ngIf",1!=s.empty),t.xp6(1),t.Q6J("ngIf",s.empty))},dependencies:[_.ez,_.sg,_.O5,_.H9]})}return o})()},6286:(v,l,r)=>{r.d(l,{N:()=>u});var _=r(5619),t=r(4769),m=r(9862);let u=(()=>{class c{constructor(n){this._HttpClient=n,this.cartNumber=new _.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.myToken=localStorage.getItem("etoken")}addToCart(n){return this._HttpClient.post(this.baseUrl+"cart",{productId:n})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(n){return this._HttpClient.delete(this.baseUrl+`cart/${n}`)}Updatecartquantity(n,a){return this._HttpClient.put(this.baseUrl+`cart/${n}`,{count:`${a}`})}removeCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(n,a){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${n}?url=http://localhost:4200`,{shippingAddress:a})}static#t=this.\u0275fac=function(a){return new(a||c)(t.LFG(m.eN))};static#e=this.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);